{
    "collab_server" : "",
    "contents" : "#New R script \n\n#Install tidyverse packages\n\ninstall.packages(\"tidyverse\")\ninstall.packages('backports')\ninstall.packages('broom')\ninstall.packages('lubridate')\ninstall.packages(\"dplyr\") \n\n#Load packages\n\nlibrary(\"tidyverse\")\nlibrary('lubridate')\n\n#Import datasets\n\nfars_accident <- read_csv(\"fars.accident.csv\")\nView(fars_accident)\n\nfars_person <- read_csv(\"fars.person.csv\")\nView(fars_person)\n\nfars_vehicle <- read_csv(\"fars.vehicle.csv\")\nView(fars_vehicle)\n\nfars_distract <- read_csv(\"fars.distract.csv\")\nView(fars_distract)\n\nfars_pbtype <- read_csv(\"fars.pbtype.csv\")\nView(fars_pbtype)\n\n#Total number of pedestrians killed using ACCIDENTS table\n\nfars_total_peds_death <- fars_accident %>%\n  filter(PEDS > 0, FATALS > 0) %>%\n  group_by(YEAR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(YEAR))\n  \nView(fars_total_peds_death)\n\nfars_example_case <- fars_person %>%\n  filter(st_case_year == \"240279_2010\")\n\nView(fars_example_case)\n\n  \n#Total of 1,043 pedestrian involved in crashes using ACCIDENTS TABLE\n\n#2016: 161\n#2015: 157\n#2014: 146\n#2013: 153\n#2012: 140\n#2011: 138\n#2010: 148 \n\n# 8.8% increase from 2010 to 2016 in pedestrian deaths. \n# PCT change 2015-2016: 2.5% increase\n# PCT change 2014-2015: 7.5% increase\n# PCT change 2013-2014: 4.6% decrease\n# PCT change 2012-2013: 9.3% increase\n# PCT change 2011-2012: 1.4% increase\n# PCT change 2010-2011: 6.8% decrease\n\nlibrary(ggplot2)\n\ndescribe(fars_total_peds_death)\n\n#Total number of pedestrians involved in crashes using PERSON TABLE\n\nfars_total_peds <- fars_person %>%\n  filter(PER_TYP == \"5\") %>%\n  group_by(INJ_SEV) %>%\n  summarise(number_records = n())  %>%\n  arrange(INJ_SEV)\nView(fars_total_peds)\n\n# 1028 pedestrians were involved in crashes. \n\n#Total number of pedestrians killed using PERSON TABLE \n\nfars_total_peds_per <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_total_peds_per)\n\nbarplot(fars_total_peds_per)\n\nggplot(data=fars_total_peds_per, aes(x=DEATH_YR, y=number_records)) +\n  geom_bar(stat=\"identity\")\n\n# 932 pedestrian involved incidents between 2010-2016. Only a slice where one person died in an accident involving a pedestrian. \n\n\n\n#2016: 137\n#2015: 136\n#2014: 132\n#2013: 138\n#2012: 125\n#2011: 128\n#2010: 136\n\n\n# 0.7% increase from 2010 to 2016 in deaths involving pedestrians. \n# PCT change 2015-2016: 0.7% increase\n# PCT change 2014-2015: 3% increase\n# PCT change 2013-2014: 4.3% decrease\n# PCT change 2012-2013: 10.4% increase\n# PCT change 2011-2012: 2.3% decrease\n# PCT change 2010-2011: 5.9% decrease\n\n\n\n\n#A look at 2016 pedestrian deaths in Maryland\n\nfars_total_peds_md <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_total_peds_md)\n\n#688 total pedestrian deaths in Maryland from 2010-2016\n\nfars_total_peds_md_2016 <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", DEATH_YR ==\"2016\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_total_peds_md_2016)\n\n#102 pedestrian deaths in Maryland in 2016\n\nfars_total_peds_de <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"10\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_total_peds_de)\n\n#177 pedestrian deaths in Deleware \n\nfars_total_peds_de_2016 <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"10\", DEATH_YR == \"2016\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_total_peds_de_2016)\n\n#27 deaths in DE in 2016\n\nfars_total_peds_dc <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"11\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_total_peds_dc)\n\n#67 pedestrian deaths in DC \n\nfars_total_peds_dc_2016 <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"11\", DEATH_YR == \"2016\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_total_peds_dc_2016)\n\n#8 deaths in DC in 2016\n\n# BY AGE IN MD all years\nfars_peds_age_md <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", DEATH_YR != 9999, DEATH_YR != 2017, AGE != \"998\", AGE != \"999\") %>%\n  group_by(AGE) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(AGE))\nView(fars_peds_age_md)\n\nfars_peds_age_md_minor <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", DEATH_YR != 9999, DEATH_YR != 2017, AGE < 18) %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\nView(fars_peds_age_md_minor)\n\n\n\n# BY AGE IN MD\nfars_peds_2016_md <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", DEATH_YR == \"2016\", AGE != \"998\") %>%\n  group_by(AGE) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(AGE))\nView(fars_peds_2016_md)\n\n#Age ranges\n\n# 0-17: 4 records\n# 18-29: 28 records \n# 30-39: 8 records \n# 40-49: 14 records\n# 50-59: 20 records\n# 60-69: 17 records\n# 70-79: 6 records\n# 80-89: 3 records\n# 90-99: 1 record \n\n#Oldest person to die was 90 and youngest person to die was 5 in 2016 in MD\n\n#Learning more about the 90-year-old who died\n\nfars_peds_90 <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", DEATH_YR == \"2016\", AGE != \"998\", AGE > 89)\nView(fars_peds_90)\n\n# Occured on August 14, 2016 at 17:54 p.m. not At Intersection-On Roadway, Not in Marked Crosswalk The pedestrian was a white, non-Hispanic 90-year-old woman. Alcohol and drugs were not involved. The victim was transported to the hospital by EMS Air. She died 10 days later on August 24, 2016 at 03:42 a.m.\n\n\n#Learning more about the 5-year-old who died\n\nfars_peds_5 <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", DEATH_YR == \"2016\", AGE != \"998\", AGE < 6)\nView(fars_peds_5)\n\n\nvehicles_5 <- fars_vehicle %>%\n  filter(st_case_year == \"240050_2016\")\nView(vehicles_5)\n\naccident_5 <- fars_accident %>%\n  filter(st_case_year == \"240050_2016\")\nView(accident_5)\n\ndistract_5 <- fars_distract %>%\n  filter(st_case_year == \"240050_2016\")\nView(distract_5)\n\nah\n\n# Carroll county, MD, Occurred on January 25, 2016 at 10:20 am, 5-year old white, non-hispanic girl killed, died on the same day at 11:09 am ,locaiton = Non At Intersection-On Roadway, Not in Marked Crosswalk no alcohol reported or drugs involved, \n\n# BY AGE IN DELAWARE\nfars_peds_2016_de <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"10\", DEATH_YR == \"2016\", AGE != \"998\") %>%\n  group_by(AGE) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(AGE))\nView(fars_peds_2016_de)\n\n#Age ranges\n\n# 0-17: 3 records\n# 18-29: 1 records \n# 30-39: 5 records \n# 40-49: 7 records\n# 50-59: 4 records\n# 60-69: 3 records\n# 70-79: 2 records\n# 80-89: 2 records\n# 90-99: 0 records \n\n#Oldest person to die was 84 and youngest person to die was 14 in 2016 in DE\n\n# BY AGE IN DC\nfars_peds_2016_dc <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"11\", DEATH_YR == \"2016\", AGE != \"998\") %>%\n  group_by(AGE) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(AGE))\nView(fars_peds_2016_dc)\n\n#Age ranges\n\n# 0-17: 0 records\n# 18-29: 2 records \n# 30-39: 2 records \n# 40-49: 1 records\n# 50-59: 1 records\n# 60-69: 1 records\n# 70-79: 1 records\n# 80-89: 0 records\n# 90-99: 0 records \n\n#Oldest person to die was 77 and youngest person to die was 23 in 2016 in DC\n\n#DRUGS INVOLVEDIN MD\nfars_peds_drug<- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", DEATH_YR == \"2016\", DRUGS == \"0\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\nView(fars_peds_drug)\n\n# 3 incidents with drug use invovled \n\n#BY LOCATION in MD in 2016\n\nfars_peds_location_2016 <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", DEATH_YR == \"2016\", AGE != \"998\") %>%\n  group_by(LOCATION) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(LOCATION))\nView(fars_peds_location_2016)\n\nggplot(data=fars_peds_location_2016, aes(x=LOCATION, y=number_records)) +\n  geom_bar(stat=\"identity\")\n\n#location all years\nfars_peds_location <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE ==\"24\", AGE != \"998\", LOCATION != \"99\", LOCATION != \"98\", LOCATION != \"28\") %>%\n  group_by(LOCATION) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records))\nView(fars_peds_location)\n\nggplot(data=fars_peds_location, aes(x=LOCATION, y=number_records)) +\n  geom_bar(stat=\"identity\")\n\n#Comparison to bicyclists\nfars_bike <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"6\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_bike)\n\n# 75 bicyclist involved accidents between 2010-2016\n\n#Comparison to drivers\n\nfars_drivers <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"1\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_drivers)\n\n# 2,536 fatal accidents involving drivers (out of 10,066 total observations)\n\n#Comparison to passengers\n\nfars_pass <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"2\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_pass)\n\n# 709 fatal accidents involving passangers \n\n\n#Total number of traffic deaths per year\n\nfars_total_deaths <- fars_person %>%\n  filter(INJ_SEV ==\"4\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR)) %>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_total_deaths)\n\nggplot(data=fars_total_deaths, aes(x=DEATH_YR, y=number_records)) +\n  geom_bar(stat=\"identity\")\n\n# 4, 282 traffic deaths \n\n# 2016: 637\n# 2015: 658\n# 2014: 574\n# 2013: 566\n# 2012: 617\n# 2011: 612\n# 2010: 618\n\n\n#Total number of traffic accidents involving school buses \n\nfars_school_bus <- fars_accident %>%\n  filter(SCH_BUS == \"1\", FATALS > 0) %>%\n  group_by(YEAR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(YEAR)) %>%\n  filter(YEAR != 9999, YEAR != 2017)\nView(fars_school_bus)\n\nggplot(data=fars_school_bus, aes(x=YEAR, y=number_records)) +\n  geom_bar(stat=\"identity\")\n\n# 14 incidents involving school buses resulted in deaths. \n\n\n# Incidents involving deaths, pedestrians and minors\n\nfars_person_minors <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", AGE < 18, DEATH_YR != 9999) %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\n\nView(fars_person_minors)\n\nggplot(data=fars_person_minors, aes(x=DEATH_YR, y=number_records)) +\n  geom_bar(stat=\"identity\")\n\n\n# Deaths at the scene of the crashes involving pedestrians and minors  \n\nfars_doa <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", AGE < 18, DOA == \"7\") %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\n\nView(fars_doa)\n\n# There are only records for 2010, 2011, and 2012 for accidents involving minor and pedestrians in which an person died on the scene.\n\n\n#Accidents involving pedestrians and minors broken down by gender\n\nfars_person_male <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", AGE < 18, SEX ==\"1\", DEATH_YR != 9999) %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\nView(fars_person_male)\n\nfars_person_female <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", AGE < 18, SEX ==\"2\", DEATH_YR != 9999) %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\nView(fars_person_female)\n\n#31 accidents involving boys and 30 accidents involving girls.\n\n\n#Gender for all ages\n\nfars_person_male_all <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", SEX ==\"1\", STATE == \"24\", DEATH_YR != 9999, DEATH_YR != 2017) %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\nView(fars_person_male_all)\n\nfars_person_female_all <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", SEX ==\"2\", STATE == \"24\", DEATH_YR != 9999, DEATH_YR != 2017) %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\nView(fars_person_female_all)\n\n# Fatal ccidents exclusively in Maryland invovling pedestrians and minors\n\nfars_person_maryland <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", AGE < 18, STATE ==\"24\", DEATH_YR != 9999) %>%\n  group_by(DEATH_YR) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(DEATH_YR))\nView(fars_person_maryland)\n\n# There was a total of 44 fatal accidents in Maryland invovling pedestrians and minors\n\n\n# Cars involved in fatal accidents with pedestrians and minors \n\nfars_car_make <- peds_u_18_vehicles %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", AGE < 18, MAKE != 99) %>%\n  group_by(MAKE) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(MAKE))\nView(fars_car_make)\n\nfars_car_make_all <- peds_u_18_vehicles %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE == \"24\", MAKE != 99) %>%\n  group_by(MAKE) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(MAKE))%>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_car_make_all)\n\n\n\n#Fords were involved in 12 accidents, Chevrolet involved in 8 acccidents, Toyotas in 7 accidents (out of 69)\n\n\n#TABLE JOINS: Joining FARS ACCIDENTS table to FARS PERSON table of deaths, pedestrians and minors \n\npeds_deaths <- fars_vehicle %>%  \n  inner_join(fars_person, by = \"st_case_year\") %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE == \"24\", DEATH_YR != 9999, DEATH_YR != 2017)\nView(peds_deaths)\n\n#USE THIS ONE\nnew_peds_deaths <- peds_deaths %>%\n  group_by(MAKE.y) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records))\nView(new_peds_deaths)\n\n#TOP 5 (excluding unknown make)\n\n#1 - Ford - 115\n#2 - Chevrolet - 77\n#3 - Toyota - 68\n#4 - Honda - 60 \n#5 - Datsun/Nissan - 33\n\n#NEW FOR JUST 2016\n\npeds_deaths_2016 <- fars_person %>%  \n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE == \"24\", DEATH_YR == \"2016\")%>%\n  inner_join(fars_vehicle, by = \"st_case_year\")\nView(peds_deaths_2016)\n\n#NEW \nnew_peds_deaths_2016 <- peds_deaths_2016 %>%\n  group_by(MAKE.y) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records))\nView(new_peds_deaths_2016)\n\n#TOP 5 for 2016 (excluding unknown make)\n\n#1 - Chevrolet - 14\n#2 - Ford - 13\n#3 - Honda - 11\n#4 - Toyota - 11  \n#5 - Dodge - 7\n\nView(fars_vehicle)\n\nvehicles_persons_accident <- fars_person %>%\n  inner_join(fars_accident, by = \"st_case_year\") %>%\n  inner_join(fars_vehicle, by = \"st_case_year\")\nView(vehicles_persons_accident)\n\nnew_vehicles_persons_accident <- vehicles_persons_accident %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE == \"24\", DEATH_YR != 9999, DEATH_YR != 2017) %>%\n  group_by(MAKE.x)\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records))\nView(new_vehicles_persons_accident)\n\npeds_deaths_all <- fars_vehicle %>%\n  inner_join(peds_deaths, by = \"st_case_year\")\nView(peds_deaths_all)\n\n\n\nfars_car_make_all <- peds_deaths_all %>%\n  group_by(MAKE) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(MAKE))%>%\n  filter(DEATH_YR != 9999, DEATH_YR != 2017)\nView(fars_car_make_all)\n\npedestrian_u_18_case_numbers <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", AGE < 18) %>%\n  distinct(st_case_year)\nView(pedestrian_u_18_case_numbers)\n\npeds_u_18_accidents <- fars_accident %>%\n  inner_join(pedestrian_u_18_case_numbers, by =\"st_case_year\")\nView(peds_u_18_accidents)\n\npeds_u_18_vehicles <- peds_u_18_accidents  %>%\n  inner_join(fars_vehicle, by =\"st_case_year\")\nView(peds_u_18_vehicles)\n\n\nfars_vehicles_make <- fars_vehicle  %>%\n  inner_join(fars_accident, by = \"st_case_year\")%>%\n  inner_join(fars_person, by = \"st_case_year\")\nview(fars_vehicles_make)\n\npeds_vehicle_make <- fars_vehicles_make  %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE == \"24\", MAKE.x != 99, YEAR ) %>%\n  group_by(MAKE.x) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records))\nView(peds_vehicle_make)\n\n\n#NEW JOINS\n\npedestrians_killed_2016 <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE == \"24\", DEATH_YR == \"2016\") %>%\n  distinct(st_case_year)\nView(pedestrians_killed_2016)\n\npedestrians_killed_all_years <- fars_person %>%\n  filter(INJ_SEV ==\"4\", PER_TYP == \"5\", STATE == \"24\", DEATH_YR != 9999) %>%\n  distinct(st_case_year)\nView(pedestrians_killed_all_years)\n\n\n#New table with info from fars_person, fars_accident, and fars_distract\n\nnew_table_2016 <- fars_distract %>%\n  inner_join(pedestrians_killed_2016, by =\"st_case_year\") %>%\n  inner_join(fars_accident, by =\"st_case_year\")\nView(new_table_2016)\n\ndeaths_by_distraction_2016 <- new_table_2016 %>%\n  group_by(MDRDSTRD) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(MDRDSTRD)) \nView(deaths_by_distraction_2016)\n\n#75/113 accidents was not caused by distracted driving. \n\n\nnew_table_all_years <- fars_distract %>%\n  inner_join(pedestrians_killed_all_years, by =\"st_case_year\") %>%\n  inner_join(fars_accident, by =\"st_case_year\")\nView(new_table_all_years)\n\ndeaths_by_distraction <- new_table_all_years %>%\n  group_by(MDRDSTRD) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(MDRDSTRD)) \nView(deaths_by_distraction)\n\n\n\n#weather conditions all years in MD \n\njoin_person_accident <- pedestrians_killed_all_years %>%\n  inner_join(fars_accident, by =\"st_case_year\")\nView(join_person_accident)\n\nweather_conditions <- join_person_accident %>%\n  group_by(WEATHER) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records)) \nView(weather_conditions)\n\n#accidents mostly occured in clear weather \n\n#weather conditions for accidents just in 2016 in MD\n\njoin_person_accident_2016 <- pedestrians_killed_2016 %>%\n  inner_join(fars_accident, by =\"st_case_year\")\nView(join_person_accident_2016)\n\nweather_conditions_2016 <- join_person_accident_2016 %>%\n  group_by(WEATHER) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records)) \nView(weather_conditions_2016)\n\n#accidents mostly occured in clear weather in 2016 \n\n\n# Location filtered by RELJCT2 in accidents table all years\n\nrelation_junction <- join_person_accident %>%\n  group_by(RELJCT2) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records)) \nView(relation_junction)\n\n# Location filtered by RELJCT2 in accidents table 2016\n\nrelation_junction_2016 <- join_person_accident_2016 %>%\n  group_by(RELJCT2) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records)) \nView(relation_junction_2016)\n\n# BY City \n\ncity_all_years <- join_person_accident %>%\n  group_by(CITY) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records)) \nView(city_all_years)\n\ncity_2016 <- join_person_accident_2016 %>%\n  group_by(CITY) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records)) \nView(city_2016)\n\n#BY county \n\ncounty_all_years <- join_person_accident %>%\n  group_by(COUNTY) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records)) \nView(county_all_years)\n\ncounty_2016 <- join_person_accident_2016 %>%\n  group_by(COUNTY) %>%\n  summarise(number_records = n()) %>%\n  arrange(desc(number_records)) \nView(county_2016)\n\n#COUNTY (ALL YEARS) \n\n# 33 = Prince George's County - 147\n# 5 = Baltimore - 128\n# 510 = Baltimore (City) - 75\n# 31 = Montgomery - 69\n# 3 = ANNE ARUNDEL - 60\n# 25 = Harford - 28\n# 17 = Charles - 23\n# 15 = Cecil - 21\n# 43 = Washington - 21\n# 37 = St. Mary's - 17\n# 27 = Howard - 15\n# 13 = Carroll - 14\n# 47 = Worcester - 14\n# 21 = Frederick - 10\n# 45 = Wicomico - 7\n# 23 = Garret - 5\n# 35 = Queen Anne's - 5\n# 19 = Dorchester - 4\n# 41 = Talbot - 4\n# 9 =  Calvert - 3\n# 1 = Allegany - 2\n# 11 = Caroline - 2\n# 39 = Somerset - 2\n\n#676 total\n\n#COUNTY (2016) \n\n# 5 = Baltimore - 19\n# 33 = Prince George's County - 19\n# 510 = Baltimore (City) - 18\n# 27 = Howard - 8\n# 31 = Montgomery - 8\n# 3 = ANNE ARUNDEL - 7\n# 13 = Carroll - 4\n# 17 = Charles - 4\n# 25 = Harford - 4\n# 43 = Washington - 3 \n# 47 = Worcester - 3\n# 15 = Cecil - 2\n# 37 = St. Mary's - 2\n# 9 =  Calvert - 1\n# 19 = Dorchester - 1\n# 35 = Queen Anne's - 1\n\n#101 total\n\n\n\n",
    "created" : 1557420907928.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4245246583",
    "id" : "E5B3D1F8",
    "lastKnownWriteTime" : 1557854143,
    "last_content_update" : 1557854143154,
    "path" : "~/Desktop/fars_exercise/script2.r",
    "project_path" : "script2.r",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}